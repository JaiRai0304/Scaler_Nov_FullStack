<!-- <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Closure Memory Leak Example</title>
</head>

<body>

    <div id="myElement">Click me</div>

    <script>
        // Memory leak example
        function closureLeak() {
            let element = document.getElementById('myElement');

            // Adding an event listener to the element using a closure
            element.onclick = function () {
                // Uses the 'element' variable in closure
                alert('Element clicked: ' + element.textContent);
            };
        }

        // Calling the function to set up the event listener
        closureLeak();


        // Assume some time passes, and the element is no longer needed
        // However, the event listener is still attached and references the 'element' variable

        // Now, if the element is removed from the DOM, the closure still holds a reference to 'element',
        // creating a memory leak as it prevents 'element' from being garbage collected.
    </script>

</body>

</html> -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Closure Memory Leak Example</title>
</head>

<body>

    <div id="myElement">Click me</div>

    <script>
        // Corrected solution
        function noClosure() {
            let element = document.getElementById('myElement');

            // Creating a new local variable 'localElement' within the closure
            element.onclick = function () {
                let localElement = element; // Capture the current value of 'element'
                alert('Element clicked: ' + localElement.textContent);
                // Some code here
            };
        }

        // Calling the function to set up the event listener
        noClosure();

        // Now, even if 'myElement' is removed from the DOM, the closure does not hold
        // a direct reference to 'element', preventing a memory leak.
    </script>

</body>

</html>